(()=>{"use strict";(()=>{let e,t=chrome;function n(n,o=null,s=[]){e.get(o,(c=>{t.runtime.lastError?(e=t.storage.local,e.get(o,(e=>{n(e,...s)}))):n(c,...s)}))}function o(n){e.set(n,(()=>{t.runtime.lastError&&(e=t.storage.local,e.set(n))}))}"object"==typeof browser&&"object"==typeof browser.runtime&&(t=browser),e=t.storage.local,"object"==typeof t.storage.sync&&(e=t.storage.sync);const s=document.documentElement;function c(e){const t=e.getElementsByClassName("check"),n=t[0];if(n.checked)return;let o=!1;for(let e=1;!o&&e<t.length;e+=1)(t[e].checked||t[e].indeterminate)&&(o=!0);o&&(n.indeterminate=!0)}function d(e,t){const n=document.getElementById("hide_redirect_home").parentNode.parentNode;!e||t?n.classList.add("hidden"):n.classList.remove("hidden")}function a(e){Object.keys(e).forEach((t=>{"boolean"==typeof e[t]?(document.getElementById(t).checked=e[t],"yt_off"===t&&s.setAttribute(t,e[t])):Object.keys(e[t]).forEach((n=>{if(document.getElementById(n).checked=e[t][n],"dark_mode"===n)s.setAttribute(n,e[t][n]);else{const o=document.getElementById(n).parentNode.parentNode.parentNode.getElementsByTagName("ul")[0];e[t][n]?o.classList.add("hidden"):o.classList.remove("hidden")}}))})),d(e.hide_feed,e.hide_subs);const t=document.getElementById("options").getElementsByTagName("ul");for(let e=1;e<t.length;e+=1)c(t[e].parentNode)}function r(e,t,n){const s=e.popup_settings;s[t]=n,o({popup_settings:s})}function i(){const e=this.checked,t=this.id;if(n(r,["popup_settings"],[t,e]),"dark_mode"===t)s.setAttribute(t,e);else{const t=this.parentNode.parentNode.parentNode.getElementsByTagName("ul")[0];e?t.classList.add("hidden"):t.classList.remove("hidden")}}document.addEventListener("DOMContentLoaded",(function(){n(a)}));const l=document.getElementsByClassName("toggle");for(let e=0;e<l.length;e+=1)l[e].addEventListener("change",i);function m(e,t){const n=e;!1===t?(n.getElementsByClassName("check")[0].indeterminate=!1,n.getElementsByClassName("check")[0].checked=!1,c(n)):n.getElementsByClassName("check")[0].indeterminate=!0;const o=n.parentNode.parentNode;"LI"===o.tagName&&m(o,t)}function h(e){const t={};Object.keys(e).forEach((n=>{if("boolean"==typeof e[n]){const o=document.getElementById(n).checked;e[n]!==o&&(t[n]=o)}})),Object.prototype.hasOwnProperty.call(t,"hide_feed")?d(t.hide_feed,e.hide_subs):Object.prototype.hasOwnProperty.call(t,"hide_subs")&&d(e.hide_feed,t.hide_subs),o(t)}function u(){const e=this.checked,t=this.parentNode.parentNode,o=t.getElementsByClassName("check");for(let t=1;t<o.length;t+=1)o[t].checked=e;"LI"===t.parentNode.parentNode.tagName&&m(t.parentNode.parentNode,e),n(h)}const g=document.getElementsByClassName("check");for(let e=0;e<g.length;e+=1)g[e].addEventListener("change",u);document.getElementById("yt_off").addEventListener("change",(function(){const e=this.checked;s.setAttribute("yt_off",e),o({yt_off:e})}))})()})();