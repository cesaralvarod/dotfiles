(()=>{"use strict";let e,t=chrome;function o(o,s=null,i=[]){e.get(s,(r=>{t.runtime.lastError?(e=t.storage.local,e.get(s,(e=>{o(e,...i)}))):o(r,...i)}))}function s(o){e.set(o,(()=>{t.runtime.lastError&&(e=t.storage.local,e.set(o))}))}const i=("object"==typeof browser&&"object"==typeof browser.runtime&&(t=browser),e=t.storage.local,"object"==typeof t.storage.sync&&(e=t.storage.sync),t),r={hide_feed:!0,hide_redirect_home:!1,hide_sidebar:!0,hide_recommended:!0,hide_chat:!0,hide_playlists:!0,hide_donate:!0,hide_transcript:!0,hide_endscreen:!0,hide_cards:!0,hide_comments:!1,hide_prof:!1,hide_mix:!1,hide_merch:!0,hide_meta:!1,hide_bar:!1,hide_channel:!1,hide_desc:!1,hide_header:!1,hide_notifs:!0,hide_left:!1,hide_channels:!1,hide_bestyt:!0,hide_moreyt:!0,hide_search:!0,hide_trending:!1,hide_subs:!1,hide_autoplay:!0,hide_annotations:!0,playlists_off:!1,yt_off:!1,popup_settings:{dark_mode:!1,sidebar_tree:!1,comment_tree:!0,meta_tree:!0,header_tree:!1,left_tree:!0}};function n(e){const t=e?"-off":"";i.browserAction.setIcon({path:{16:`images/icon${t}-16.png`,32:`images/icon${t}-32.png`,48:`images/icon${t}-48.png`,128:`images/icon${t}-128.png`}})}i.runtime.onInstalled.addListener((({reason:e})=>{"install"===e&&i.tabs.create({url:"https://unhook.app/welcome"})})),i.runtime.setUninstallURL("https://unhook.app/uninstall");let c={hide_feed:!1,hide_redirect_home:!1,hide_trending:!1,hide_subs:!1,playlists_off:!1,yt_off:!1};const d=Object.keys(c);function a(e){c=e}function h(){o(a,d)}function l(e,t){i.tabs.update(t,{url:e})}o((function(o){const i=Object.keys(o).length;0===i?s(r):function(e,t){return t!==Object.keys(r).length||Object.keys(r).some((t=>!Object.prototype.hasOwnProperty.call(e,t)))||Object.keys(e.popup_settings).length!==Object.keys(r.popup_settings).length}(o,i)&&(Object.keys(r).forEach((e=>{Object.prototype.hasOwnProperty.call(o,e)?"boolean"==typeof r[e]?r[e]=o[e]:Object.keys(r[e]).forEach((t=>{Object.prototype.hasOwnProperty.call(o[e],t)&&(r[e][t]=o[e][t])})):"hide_transcript"===e&&Object.prototype.hasOwnProperty.call(o,"hide_sidebar")&&(r[e]=o.hide_sidebar)})),e.clear((()=>{t.runtime.lastError&&(e=t.storage.local,e.clear())})),s(r)),n(o.yt_off||r.yt_off)})),h(),i.storage.onChanged.addListener((e=>{for(let t=0;t<d.length;t+=1)if(Object.prototype.hasOwnProperty.call(e,d[t])){"yt_off"===d[t]&&n(e.yt_off.newValue),h();break}})),i.webRequest.onBeforeRequest.addListener((({url:e,tabId:t})=>{if(!c.yt_off){if((c.hide_trending&&/^https:\/\/.*\.youtube\.com\/feed\/(trending|explore)/.test(e)||c.hide_subs&&-1!==e.indexOf("subscriptions"))&&l("https://www.youtube.com",t),c.playlists_off){const o=e.indexOf("&list=");-1!==o&&l(e.substring(0,o),t)}c.hide_redirect_home&&c.hide_feed&&!c.hide_subs&&/^https:\/\/.*\.youtube\.com\/(?:\?.*)?$/.test(e)&&l("https://www.youtube.com/feed/subscriptions",t)}}),{urls:["https://*.youtube.com/","https://*.youtube.com/?*","https://*.youtube.com/feed/trending*","https://*.youtube.com/feed/explore*","https://*.youtube.com/feed/subscriptions*","https://*.youtube.com/watch?v=*&list=*"],types:["main_frame","sub_frame","xmlhttprequest"]})})();